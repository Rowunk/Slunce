:root{
    --primary-color:#ff6b35;
    --secondary-color:#f7931e;
    --background:#1a1a1a;
    --surface:#2d2d2d;
    --text:#ffffff;
    --text-secondary:#cccccc;
    --border:#404040;
    --success:#4caf50;
    --golden:#ffd700;
    --blue:#6b8fff;            /* WCAG-AA on #1a1a1a */
    --spacing:.75rem;
    --border-radius:8px;
    --shadow:0 2px 8px rgba(0,0,0,.3);
  }
  
  *{margin:0;padding:0;box-sizing:border-box;}
  html{color-scheme:dark light;}
  
  body{
    font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
    background:var(--background);color:var(--text);line-height:1.6;
    height:100vh;overflow:hidden;display:flex;flex-direction:column;
  }
  
  /* ───────── Header ───────── */
  header{
    background:var(--surface);
    border-bottom:2px solid var(--primary-color);
    padding:.6rem 1rem;
    flex-shrink:0;
  }
  .header-content{
    display:flex;justify-content:space-between;align-items:center;
    max-width:1400px;margin:0 auto;
  }
  .title-section h1{
    font-size:1.6rem;font-weight:700;
    background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));
    -webkit-background-clip:text;background-clip:text;color:transparent;
  }
  .title-section p{color:var(--text-secondary);font-size:.83rem;}
  .header-controls{display:flex;align-items:center;gap:.5rem;}
  
  .install-btn{
    background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));
    color:#fff;border:none;padding:.4rem .8rem;border-radius:var(--border-radius);
    cursor:pointer;font-size:.8rem;font-weight:600;transition:.3s ease;
    display:flex;align-items:center;gap:.3rem;box-shadow:var(--shadow);
  }
  .install-btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(255,107,53,.4);}
  
  .language-switcher{display:flex;gap:.25rem;}
  .lang-btn{
    background:var(--background);color:var(--text-secondary);
    border:1px solid var(--border);padding:.35rem .7rem;border-radius:4px;
    cursor:pointer;font-size:.74rem;font-weight:600;transition:.2s ease;min-width:35px;
  }
  .lang-btn:hover,.lang-btn.active{background:var(--primary-color);color:#fff;border-color:var(--primary-color);}
  
  /* ───────── Main wrapper ───────── */
  main{
    flex:1;
    display:grid;
    grid-template-columns:1fr;
    gap:.6rem;
    padding:.8rem;
    max-width:1400px;
    margin:0 auto;
    width:100%;
    min-height:0;
  }
  
  /* ───────── Results grid ───────── */
  .results{
    background:var(--surface);
    border-radius:var(--border-radius);
    padding:.6rem .5rem .5rem;          /* tighter top/bottom */
    box-shadow:var(--shadow);
    overflow-y:auto;
    min-height:0;
  
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:.6rem;
  
    grid-auto-rows:auto;                /* shrink first row */
    align-items:start;                  /* items top-align */
    align-content:start;                /* grid hugs top    */
  }
  
  /* ───────── Day-Length banner ───────── */
  .day-length{
    grid-column:1 / span 2;
    background:linear-gradient(135deg,rgba(255,107,53,.10),rgba(255,255,255,.02));
    border-radius:var(--border-radius);
    box-shadow:inset 0 0 0 1px rgba(255,107,53,.25),
               0 0 12px rgba(255,107,53,.20);
    padding:.5rem .6rem;
    text-align:center;
  }
  .day-length .event-label{font-size:.9rem;color:var(--primary-color);font-weight:600;}
  .day-length .event-time{
    font-size:1.35rem;letter-spacing:.5px;color:var(--primary-color);
    font-family:'SF Mono',Monaco,'Cascadia Code',monospace;font-weight:700;
    margin-top:.1rem;
  }
  
  /* ───────── Settings banner ───────── */
  .settings-banner{
    grid-column:3 / span 2;
    background:var(--background);
    border-left:4px solid var(--primary-color);
    border-radius:var(--border-radius);
    padding:.5rem .6rem;
    display:flex;gap:.6rem;align-items:flex-start;
  }
  .settings-banner .input-section{
    flex:1;background:none;border:none;box-shadow:none;padding:0;
  }
  .input-section h2{color:var(--primary-color);margin-bottom:.35rem;font-size:.88rem;}
  
  button{
    background:var(--primary-color);color:#fff;border:none;padding:.5rem .8rem;
    border-radius:var(--border-radius);cursor:pointer;font-size:.8rem;transition:.2s ease;
    width:100%;margin-bottom:.45rem;
  }
  button:hover{background:var(--secondary-color);transform:translateY(-1px);}
  .manual-input{display:flex;flex-direction:column;gap:.4rem;}
  input{
    background:var(--background);color:var(--text);
    border:1px solid var(--border);padding:.5rem;border-radius:var(--border-radius);
    font-size:.8rem;
  }
  input:focus{outline:none;border-color:var(--primary-color);
              box-shadow:0 0 0 2px rgba(255,107,53,.2);}
  
  /* ───────── Event-group cards ───────── */
  .event-group{
    background:var(--background);
    border-radius:var(--border-radius);
    padding:.5rem;
    border-left:4px solid var(--border);
    display:flex;flex-direction:column;
    height:100%;                       /* fill row height */
    transition:.15s ease;
  }
  .event-group.main        {border-left-color:var(--primary-color);}
  .event-group.photography {border-left-color:var(--golden);}
  .event-group.changes     {border-left-color:var(--secondary-color);}
  .event-group.position    {border-left-color:var(--blue);}
  
  .event-group:hover{
    transform:translateY(-2px);
    box-shadow:0 6px 12px rgba(0,0,0,.35);
  }
  
  .event-group h3{
    color:var(--primary-color);
    margin-bottom:.32rem;
    font-size:.82rem;
    font-weight:600;
    letter-spacing:.42px;
    text-transform:uppercase;
    border-bottom:1px solid var(--border);
    padding-bottom:.22rem;
  }
  
  /* Lines & items */
  .event-line{
    display:flex;flex-direction:column;padding:.25rem .3rem;margin-bottom:.3rem;
    border-radius:var(--border-radius);background:rgba(255,255,255,.02);
  }
  .event-line:hover{background:rgba(255,255,255,.05);}
  .event-line.highlight{
    background:linear-gradient(90deg,rgba(255,107,53,.10),transparent);
    border-left:3px solid var(--primary-color);padding-left:.3rem;
  }
  .event-pair{display:flex;flex-direction:column;gap:.3rem;}
  .event-item{display:flex;justify-content:space-between;align-items:center;gap:.4rem;}
  
  .event-label{
    font-weight:500;color:var(--text-secondary);font-size:.74rem;line-height:1.3;
    flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  }
  .event-time{
    font-weight:700;font-size:.83rem;color:var(--primary-color);
    font-family:'SF Mono',Monaco,'Cascadia Code',monospace;min-width:55px;text-align:right;
  }
  .event-time.golden{color:var(--golden);}
  .event-time.blue  {color:var(--blue);}
  
  .single-line{
    display:flex;justify-content:space-between;align-items:center;
    padding:.25rem .3rem;margin-bottom:.3rem;border-radius:var(--border-radius);
    background:rgba(255,255,255,.02);
  }
  .single-line .event-label{font-size:.74rem;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
  .single-line .event-time{font-size:.83rem;min-width:55px;text-align:right;margin-left:.5rem;}
  
  /* ───────── Tooltips ───────── */
  .info-tooltip {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
  }
  
  .info-icon {
    display: inline-block;
    width: 14px;
    height: 14px;
    background: var(--text-secondary);
    border-radius: 50%;
    text-align: center;
    line-height: 14px;
    font-size: 10px;
    font-weight: bold;
    color: var(--background);
    cursor: help;
    transition: all 0.2s ease;
    user-select: none;
    flex-shrink: 0;
  }
  
  .info-icon:hover {
    background: var(--primary-color);
    transform: scale(1.1);
  }
  
  .tooltip-content {
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--border-radius);
    padding: 0.6rem 0.8rem;
    max-width: 280px;
    width: max-content;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    font-size: 0.75rem;
    line-height: 1.4;
    color: var(--text);
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    pointer-events: none;
  }
  
  .tooltip-content::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 5px solid transparent;
    border-top-color: var(--surface);
  }
  
  .info-tooltip:hover .tooltip-content {
    opacity: 1;
    visibility: visible;
  }
  
  /* Mobile tooltip adjustments */
  @media (max-width: 768px) {
    .tooltip-content {
      position: fixed;
      bottom: auto;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 90vw;
      width: auto;
      font-size: 0.8rem;
    }
    
    .tooltip-content::after {
      display: none;
    }
    
    /* Click-to-show on mobile */
    .info-icon {
      background: var(--primary-color);
    }
    
    .info-tooltip.active .tooltip-content {
      opacity: 1;
      visibility: visible;
    }
  }
  
  /* ───────── Media queries ───────── */
  @media(max-width:768px){
    main{padding:.6rem;}
    .results{grid-template-columns:repeat(2,1fr);gap:.5rem;}
    .settings-banner{grid-column:1 / -1;flex-direction:row;}
    .day-length{grid-column:1 / -1;margin-bottom:.4rem;}
  }
  @media(max-width:480px){
    .results{grid-template-columns:1fr;gap:.4rem;}
    .settings-banner{flex-direction:column;}
    main{padding:.4rem;}
  }
  
  /* ───────── Utilities & animations ───────── */
  .hidden{display:none!important;}
  .loading{opacity:.6;pointer-events:none;position:relative;}
  .loading::after{
    content:'';position:absolute;top:50%;left:50%;
    width:18px;height:18px;margin:-9px 0 0 -9px;
    border:2px solid var(--primary-color);border-radius:50%;
    border-top-color:transparent;animation:spin 1s linear infinite;
  }
  @keyframes spin{to{transform:rotate(360deg)}}
  .success{animation:slideIn .3s ease;}
  @keyframes slideIn{from{opacity:0;transform:translateY(8px);}to{opacity:1;transform:translateY(0);}}
  .no-event{color:var(--text-secondary)!important;font-style:italic;font-size:.75rem!important;}
  button:focus,input:focus,.lang-btn:focus,.install-btn:focus{outline:2px solid var(--primary-color);outline-offset:2px;}
  
  /* ───────── Modal / Toast / Notification ───────── */
  .modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);
         display:flex;justify-content:center;align-items:center;z-index:1000;
         backdrop-filter:blur(4px);}
  .modal-content{background:var(--surface);border-radius:var(--border-radius);
                 max-width:500px;width:90%;max-height:80vh;overflow-y:auto;
                 box-shadow:0 8px 24px rgba(0,0,0,.5);}
  .modal-header{display:flex;justify-content:space-between;align-items:center;
                padding:1rem;border-bottom:1px solid var(--border);}
  .modal-header h3{color:var(--primary-color);margin:0;font-size:1.1rem;}
  .close-btn{background:none;border:none;font-size:1.5rem;color:var(--text-secondary);
             cursor:pointer;padding:.25rem;border-radius:4px;transition:.2s ease;}
  .close-btn:hover{background:var(--background);color:var(--text);}
  .modal-body{padding:1rem;}
  
  .instruction-group{margin-bottom:1rem;padding:.8rem;background:var(--background);
                     border-radius:var(--border-radius);border-left:4px solid var(--primary-color);}
  .instruction-group h4{color:var(--primary-color);margin:0 0 .5rem;font-size:.9rem;}
  .instruction-group ol{margin:0;padding-left:1.2rem;}
  .instruction-group li{margin-bottom:.4rem;color:var(--text-secondary);line-height:1.4;font-size:.85rem;}
  
  .install-benefits{background:linear-gradient(135deg,rgba(255,107,53,.1),rgba(247,147,30,.1));
                    padding:.8rem;border-radius:var(--border-radius);margin-top:.8rem;}
  .install-benefits h4{color:var(--primary-color);margin:0 0 .5rem;font-size:.9rem;}
  .install-benefits ul{list-style:none;padding:0;margin:0;}
  .install-benefits li{padding:.2rem 0;color:var(--text-secondary);font-size:.85rem;}
  
  .notification{position:fixed;top:1rem;right:1rem;background:var(--surface);
                border:1px solid var(--border);border-radius:var(--border-radius);
                box-shadow:var(--shadow);z-index:1001;max-width:350px;}
  .notification-content{display:flex;align-items:center;gap:1rem;padding:.8rem;}
  .update-btn{background:var(--primary-color);color:#fff;border:none;padding:.4rem .8rem;
              border-radius:4px;cursor:pointer;font-size:.8rem;font-weight:600;transition:.2s ease;}
  .update-btn:hover{background:var(--secondary-color);}
  .dismiss-btn{background:none;border:none;color:var(--text-secondary);cursor:pointer;
               font-size:1.1rem;padding:.2rem;border-radius:4px;transition:.2s ease;}
  .dismiss-btn:hover{background:var(--background);color:var(--text);}
  
  .toast{position:fixed;bottom:1rem;left:50%;transform:translateX(-50%);
         background:var(--success);color:#fff;padding:.8rem 1.2rem;border-radius:var(--border-radius);
         box-shadow:var(--shadow);z-index:1001;font-size:.85rem;}